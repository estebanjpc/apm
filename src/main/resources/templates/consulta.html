<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/layout :: head"></head>
<body class="d-flex flex-column min-vh-100">

	<header th:replace="layout/layout :: header"></header>

	<div class="container py-4">

		<div class="row">
			<div class="col text-center">
				<h3>
					<label class="form-label" th:text="${titulo}"></label>
				<h3>				
			</div>
		</div>
		<br>
		
		<div class="row justify-content-center">
			<div class="col-10">
				<div class="card mt-4">

					<div class="card-body">

						<table class="table table-striped table-hover">
							<thead>
								<tr>
									<th>#</th>
									<th>Nombre</th>
									<th>Rut</th>
									<th>Empresa</th>
									<th>Fecha</th>
									<th class="text-center">PDF</th>
									<th class="text-center">Email</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="l,cont: ${listadoLiquidacion}">
									<td th:text="${cont.index + 1}"></td>
									<td th:text="${l.usuario.nombre} + ' ' + ${l.usuario.apellido}"></td>
									<td th:text="${l.usuario.rut}"></td>
									<td th:text="${l.empresa.nombre}"></td>
									<td th:text="${#strings.capitalize(#dates.format(l.fecha, 'MMMM - yyyy'))}"></td>
									<td class="text-center"><button th:onclick="verPdfsEP([[${l.id}]]);" class="btn btn-danger btn-sm"><i class="bi bi-file-pdf"></i> PDF</button></td>
									<td class="text-center">
										<a th:href="@{/enviarPdfEmail/} + ${l.id}" class="btn btn-sm btn-success"> <i class="bi bi-envelope"></i> Envio</a>
									</td>
								</tr>
							</tbody>
						</table>

					</div>

				</div>
			</div>
		</div>


	</div>


		<!-- Modal INICIO -->
	<div class="modal fade" id="viewPdfModalEP" tabindex="-1" aria-labelledby="viewPdfModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl">
    		<div class="modal-content">
      			<div class="modal-header">
        			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      			</div>
      			<div class="modal-body">
        			<embed id="idDivModalEP" frameborder="0" width="100%" height="600px">
      			</div>
    		</div>
  		</div>
	</div>
	<!-- Modal FIN -->

	<script th:src="@{/js/liquidacion.js}"></script>
	<footer th:replace="layout/layout :: footer"></footer>
</body>
</html>